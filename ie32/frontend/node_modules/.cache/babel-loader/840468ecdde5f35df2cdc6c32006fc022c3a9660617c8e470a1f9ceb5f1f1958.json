{"ast":null,"code":"var _jsxFileName = \"/Users/fofolove/Desktop/IE-Project-TA32/ie32/frontend/src/components/Step4Container.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport * as d3 from 'd3';\nimport './step4container.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Step4Container = ({\n  appliances,\n  userInformation\n}) => {\n  _s();\n  const treemapRef = useRef(null);\n  useEffect(() => {\n    if (appliances.length > 0) {\n      createTreemap();\n    }\n  }, [appliances]);\n  const createTreemap = () => {\n    const width = 600;\n    const height = 300;\n\n    // Convert the appliances data to a hierarchical format\n    const data = {\n      name: 'root',\n      children: appliances.map(appliance => ({\n        name: appliance.applianceType,\n        value: appliance.dailyHours * appliance.energyConsumption * appliance.quantity\n      }))\n    };\n\n    // Create a root node from the data\n    const root = d3.hierarchy(data).sum(d => d.value).sort((a, b) => b.value - a.value);\n\n    // Generate the treemap layout\n    const treemapLayout = d3.treemap().size([width, height]).padding(2);\n    treemapLayout(root);\n    const svg = d3.select(treemapRef.current).attr('width', width).attr('height', height);\n    svg.selectAll('g').remove(); // Clear previous treemap if any\n\n    // Define the image pattern in SVG\n    svg.append('defs').append('pattern').attr('id', 'image-pattern').attr('patternUnits', 'userSpaceOnUse').attr('width', 100).attr('height', 100).append('image').attr('href', '/images/treemapitem.jpg') // Make sure this path is correct\n    .attr('width', 100).attr('height', 100);\n    const nodes = svg.selectAll('g').data(root.leaves()).enter().append('g').attr('class', 'treemap-node').attr('transform', d => `translate(${d.x0},${d.y0})`);\n    nodes.append('rect').attr('width', d => d.x1 - d.x0).attr('height', d => d.y1 - d.y0).attr('rx', 10) // Rounded corners\n    .attr('fill', 'url(#image-pattern)').attr('stroke', 'white').attr('stroke-width', 2);\n    nodes.append('text').attr('x', 5).attr('y', 20).attr('font-size', '12px').attr('fill', 'black').text(d => d.data.name);\n  };\n\n  // Calculate the estimated monthly bill based on appliances data\n  const totalConsumption = appliances.reduce((total, appliance) => {\n    return total + appliance.dailyHours * appliance.energyConsumption * appliance.quantity;\n  }, 0);\n  const estimatedMonthlyBill = (totalConsumption * 30).toFixed(2); // Example calculation\n\n  // Define a fixed benchmark for now\n  const benchmark = 38; // kWh\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"step4-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"left-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"insight-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"insight-bill insight\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Your Estimated Monthly Bill\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"insight-value\",\n            children: [estimatedMonthlyBill, \" AUD\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"insight-benchmark insight\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Your Estimated Benchmark\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"insight-value\",\n            children: [benchmark, \" kWh\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"treemap-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Your Home Appliance Consumption Ranking\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n          ref: treemapRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-section\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-placeholder\",\n        children: \"Map Placeholder\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n};\n_s(Step4Container, \"pHS7ZUM4PdYVZNjaNjtP6ZSd+0I=\");\n_c = Step4Container;\nStep4Container.propTypes = {\n  appliances: PropTypes.array.isRequired,\n  userInformation: PropTypes.object.isRequired\n};\nexport default Step4Container;\nvar _c;\n$RefreshReg$(_c, \"Step4Container\");","map":{"version":3,"names":["React","useEffect","useRef","PropTypes","d3","jsxDEV","_jsxDEV","Step4Container","appliances","userInformation","_s","treemapRef","length","createTreemap","width","height","data","name","children","map","appliance","applianceType","value","dailyHours","energyConsumption","quantity","root","hierarchy","sum","d","sort","a","b","treemapLayout","treemap","size","padding","svg","select","current","attr","selectAll","remove","append","nodes","leaves","enter","x0","y0","x1","y1","text","totalConsumption","reduce","total","estimatedMonthlyBill","toFixed","benchmark","className","fileName","_jsxFileName","lineNumber","columnNumber","ref","_c","propTypes","array","isRequired","object","$RefreshReg$"],"sources":["/Users/fofolove/Desktop/IE-Project-TA32/ie32/frontend/src/components/Step4Container.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport * as d3 from 'd3';\nimport './step4container.css';\n\nconst Step4Container = ({ appliances, userInformation }) => {\n    const treemapRef = useRef(null);\n\n    useEffect(() => {\n        if (appliances.length > 0) {\n            createTreemap();\n        }\n    }, [appliances]);\n\n    const createTreemap = () => {\n        const width = 600;\n        const height = 300;\n\n        // Convert the appliances data to a hierarchical format\n        const data = {\n            name: 'root',\n            children: appliances.map(appliance => ({\n                name: appliance.applianceType,\n                value: appliance.dailyHours * appliance.energyConsumption * appliance.quantity\n            }))\n        };\n\n        // Create a root node from the data\n        const root = d3.hierarchy(data)\n            .sum(d => d.value)\n            .sort((a, b) => b.value - a.value);\n\n        // Generate the treemap layout\n        const treemapLayout = d3.treemap()\n            .size([width, height])\n            .padding(2);\n\n        treemapLayout(root);\n\n        const svg = d3.select(treemapRef.current)\n            .attr('width', width)\n            .attr('height', height);\n\n        svg.selectAll('g').remove(); // Clear previous treemap if any\n\n        // Define the image pattern in SVG\n        svg.append('defs')\n            .append('pattern')\n            .attr('id', 'image-pattern')\n            .attr('patternUnits', 'userSpaceOnUse')\n            .attr('width', 100)\n            .attr('height', 100)\n            .append('image')\n            .attr('href', '/images/treemapitem.jpg') // Make sure this path is correct\n            .attr('width', 100)\n            .attr('height', 100);\n\n        const nodes = svg\n            .selectAll('g')\n            .data(root.leaves())\n            .enter()\n            .append('g')\n            .attr('class', 'treemap-node')\n            .attr('transform', d => `translate(${d.x0},${d.y0})`);\n\n        nodes\n            .append('rect')\n            .attr('width', d => d.x1 - d.x0)\n            .attr('height', d => d.y1 - d.y0)\n            .attr('rx', 10) // Rounded corners\n            .attr('fill', 'url(#image-pattern)')\n            .attr('stroke', 'white')\n            .attr('stroke-width', 2);\n\n        nodes\n            .append('text')\n            .attr('x', 5)\n            .attr('y', 20)\n            .attr('font-size', '12px')\n            .attr('fill', 'black')\n            .text(d => d.data.name);\n    };\n\n    // Calculate the estimated monthly bill based on appliances data\n    const totalConsumption = appliances.reduce((total, appliance) => {\n        return total + appliance.dailyHours * appliance.energyConsumption * appliance.quantity;\n    }, 0);\n\n    const estimatedMonthlyBill = (totalConsumption * 30).toFixed(2); // Example calculation\n\n    // Define a fixed benchmark for now\n    const benchmark = 38; // kWh\n\n    return (\n        <div className=\"step4-container\">\n            <div className=\"left-section\">\n                <div className=\"insight-section\">\n                    <div className=\"insight-bill insight\">\n                        <h3>Your Estimated Monthly Bill</h3>\n                        <p className=\"insight-value\">{estimatedMonthlyBill} AUD</p>\n                    </div>\n                    <div className=\"insight-benchmark insight\">\n                        <h3>Your Estimated Benchmark</h3>\n                        <p className=\"insight-value\">{benchmark} kWh</p>\n                    </div>\n                </div>\n                <div className=\"treemap-section\">\n                    <h3>Your Home Appliance Consumption Ranking</h3>\n                    <svg ref={treemapRef}></svg>\n                </div>\n            </div>\n            <div className=\"map-section\">\n                <div className=\"map-placeholder\">Map Placeholder</div>\n            </div>\n        </div>\n    );\n};\n\nStep4Container.propTypes = {\n    appliances: PropTypes.array.isRequired,\n    userInformation: PropTypes.object.isRequired,\n};\n\nexport default Step4Container;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}