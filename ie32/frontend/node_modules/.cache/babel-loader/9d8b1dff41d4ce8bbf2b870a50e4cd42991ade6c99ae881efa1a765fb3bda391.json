{"ast":null,"code":"var _jsxFileName = \"/Users/fofolove/Desktop/IE-Project-TA32/ie32/frontend/src/components/Step4Container.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport * as d3 from 'd3';\nimport './step4container.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Step4Container = ({\n  appliances,\n  userInformation\n}) => {\n  _s();\n  const treemapRef = useRef(null);\n  useEffect(() => {\n    if (appliances.length > 0) {\n      createTreemap();\n    }\n  }, [appliances]);\n  const createTreemap = () => {\n    const width = 600;\n    const height = 300;\n    const root = d3.hierarchy({\n      children: appliances\n    }).sum(d => d.dailyHours * d.energyConsumption * d.quantity).sort((a, b) => b.value - a.value);\n    const treemapLayout = d3.treemap().size([width, height]).paddingInner(2); // Add padding to avoid overlap\n\n    treemapLayout(root);\n    const svg = d3.select(treemapRef.current).attr('width', width).attr('height', height);\n    svg.selectAll('g').remove(); // Clear previous treemap if any\n\n    const nodes = svg.selectAll('g').data(root.leaves()).enter().append('g').attr('transform', d => `translate(${d.x0},${d.y0})`);\n    nodes.append('rect').attr('width', d => Math.max(0, d.x1 - d.x0)) // Ensure no negative width\n    .attr('height', d => Math.max(0, d.y1 - d.y0)) // Ensure no negative height\n    .attr('fill', d => d3.interpolateBlues(d.value / root.value));\n    nodes.append('text').attr('x', 3).attr('y', 15).text(d => d.data.applianceType).attr('font-size', '12px').attr('fill', 'white').attr('clip-path', d => `inset(0 0 ${Math.max(0, d.y1 - d.y0)}px ${Math.max(0, d.x1 - d.x0)}px)`).style('overflow', 'hidden');\n  };\n\n  // Calculate the estimated monthly bill based on appliances data\n  const totalConsumption = appliances.reduce((total, appliance) => {\n    return total + appliance.dailyHours * appliance.energyConsumption * appliance.quantity;\n  }, 0);\n  const estimatedMonthlyBill = (totalConsumption * 30).toFixed(2); // Example calculation\n\n  // Define a fixed benchmark for now\n  const benchmark = 38; // kWh\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"step4-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"left-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"insight-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"insight-bill insight\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Your Estimated Monthly Bill\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"insight-value\",\n            children: [estimatedMonthlyBill, \" AUD\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"insight-benchmark insight\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Your Estimated Benchmark\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"insight-value\",\n            children: [benchmark, \" kWh\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"treemap-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Your Home Appliance Consumption Ranking\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n          ref: treemapRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-section\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-placeholder\",\n        children: \"Map Placeholder\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\n_s(Step4Container, \"pHS7ZUM4PdYVZNjaNjtP6ZSd+0I=\");\n_c = Step4Container;\nStep4Container.propTypes = {\n  appliances: PropTypes.array.isRequired,\n  userInformation: PropTypes.object.isRequired\n};\nexport default Step4Container;\nvar _c;\n$RefreshReg$(_c, \"Step4Container\");","map":{"version":3,"names":["React","useEffect","useRef","PropTypes","d3","jsxDEV","_jsxDEV","Step4Container","appliances","userInformation","_s","treemapRef","length","createTreemap","width","height","root","hierarchy","children","sum","d","dailyHours","energyConsumption","quantity","sort","a","b","value","treemapLayout","treemap","size","paddingInner","svg","select","current","attr","selectAll","remove","nodes","data","leaves","enter","append","x0","y0","Math","max","x1","y1","interpolateBlues","text","applianceType","style","totalConsumption","reduce","total","appliance","estimatedMonthlyBill","toFixed","benchmark","className","fileName","_jsxFileName","lineNumber","columnNumber","ref","_c","propTypes","array","isRequired","object","$RefreshReg$"],"sources":["/Users/fofolove/Desktop/IE-Project-TA32/ie32/frontend/src/components/Step4Container.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport * as d3 from 'd3';\nimport './step4container.css';\n\nconst Step4Container = ({ appliances, userInformation }) => {\n    const treemapRef = useRef(null);\n\n    useEffect(() => {\n        if (appliances.length > 0) {\n            createTreemap();\n        }\n    }, [appliances]);\n\n    const createTreemap = () => {\n        const width = 600;\n        const height = 300;\n\n        const root = d3.hierarchy({ children: appliances })\n            .sum(d => d.dailyHours * d.energyConsumption * d.quantity)\n            .sort((a, b) => b.value - a.value);\n\n        const treemapLayout = d3.treemap()\n            .size([width, height])\n            .paddingInner(2);  // Add padding to avoid overlap\n\n        treemapLayout(root);\n\n        const svg = d3.select(treemapRef.current)\n            .attr('width', width)\n            .attr('height', height);\n\n        svg.selectAll('g').remove(); // Clear previous treemap if any\n\n        const nodes = svg\n            .selectAll('g')\n            .data(root.leaves())\n            .enter()\n            .append('g')\n            .attr('transform', d => `translate(${d.x0},${d.y0})`);\n\n        nodes\n            .append('rect')\n            .attr('width', d => Math.max(0, d.x1 - d.x0))  // Ensure no negative width\n            .attr('height', d => Math.max(0, d.y1 - d.y0)) // Ensure no negative height\n            .attr('fill', d => d3.interpolateBlues(d.value / root.value));\n\n        nodes\n            .append('text')\n            .attr('x', 3)\n            .attr('y', 15)\n            .text(d => d.data.applianceType)\n            .attr('font-size', '12px')\n            .attr('fill', 'white')\n            .attr('clip-path', d => `inset(0 0 ${Math.max(0, d.y1 - d.y0)}px ${Math.max(0, d.x1 - d.x0)}px)`)\n            .style('overflow', 'hidden');\n    };\n\n\n    // Calculate the estimated monthly bill based on appliances data\n    const totalConsumption = appliances.reduce((total, appliance) => {\n        return total + appliance.dailyHours * appliance.energyConsumption * appliance.quantity;\n    }, 0);\n\n    const estimatedMonthlyBill = (totalConsumption * 30).toFixed(2); // Example calculation\n\n    // Define a fixed benchmark for now\n    const benchmark = 38; // kWh\n\n    return (\n        <div className=\"step4-container\">\n            <div className=\"left-section\">\n                <div className=\"insight-section\">\n                    <div className=\"insight-bill insight\">\n                        <h3>Your Estimated Monthly Bill</h3>\n                        <p className=\"insight-value\">{estimatedMonthlyBill} AUD</p>\n                    </div>\n                    <div className=\"insight-benchmark insight\">\n                        <h3>Your Estimated Benchmark</h3>\n                        <p className=\"insight-value\">{benchmark} kWh</p>\n                    </div>\n                </div>\n                <div className=\"treemap-section\">\n                    <h3>Your Home Appliance Consumption Ranking</h3>\n                    <svg ref={treemapRef}></svg>\n                </div>\n            </div>\n            <div className=\"map-section\">\n                <div className=\"map-placeholder\">Map Placeholder</div>\n            </div>\n        </div>\n    );\n};\n\nStep4Container.propTypes = {\n    appliances: PropTypes.array.isRequired,\n    userInformation: PropTypes.object.isRequired,\n};\n\nexport default Step4Container;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}